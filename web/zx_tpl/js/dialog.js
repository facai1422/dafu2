var Modal=(function(d){var c=d(document.body);var e=(function(){var m,l=0,k=function(){m=d('<div class="modal-backdrop fade in"></div>').appendTo(c)};return{show:function(){!m&&k();m[0].style.display="block";l++},hide:function(){l--;if(!l){m.remove();m=undefined}}}})(),a=function(){return['<div class="modal fade prompt" data-show="false" style="z-index: 9999;" id="_confirm_dialog" data-dismiss="modal" data-keyboard="false" aria-hidden="true" data-backdrop="static">','<div class="modal-dialog modal-sm general_cue" role="document">','    <div class="modal-content">','        <div class="modal-header">','            <button type="button" class="close" data-dismiss="modal">','                <span aria-hidden="true">×</span><span class="sr-only">Close</span>',"            </button>","        </div>",'        <div class="modal-body" style="position: relative">','            <div class="form-group-body"></div>',"        </div>",'        <div class="modal-footer"></div>',"    </div>","</div>","</div>"].join("")},i=function(m,l){var k=g(m,l);m.setTitle(l.title,true);m.setContent(l);m.addButtons(l);m.setWidth(l.width);h(m,l);k.modal();k.trigger("contentReady")},g=function(n,m){var l=n.$modal=d(a()).appendTo(c);n.$modalTitle=l.find(".modal-title");n.$modalBody=l.find(".modal-body .form-group-body");n.$modalFooter=l.find(".modal-footer");var k=m.isSuccess;if(k=="success"){l.removeClass("prompt").addClass("success")}else{if(k=="question"){l.removeClass("prompt").addClass("doubt")}else{if(k=="error"){l.removeClass("prompt").addClass("fail")}}}return l},h=function(m,l){var k=m.$modal;typeof l.onContentChange==="function"&&k.on("contentChange",d.proxy(l.onContentChange,m));typeof l.onContentReady==="function"&&k.on("contentReady",d.proxy(l.onContentReady,m));typeof l.onModalShow==="function"&&k.on("modalShow",d.proxy(l.onModalShow,m));typeof l.onModalHide==="function"&&k.on("modalHide",d.proxy(l.onModalHide,m));k.on("show.bs.modal",function(){k.trigger("modalShow")});k.on("hidden.bs.modal",function(){k.trigger("modalHide")})},j=function(l,k){return function(){var m=this.options||k,n=m[l]&&typeof m[l]==="function"?m[l]:"";return n&&n.apply(this,arguments)}};function f(k){this.options=this.getOptions(k);this.$modal=undefined;this.$modalTitle=undefined;this.$modalBody=undefined;this.$modalFooter=undefined;this.state=undefined}f.defaults={title:"",content:"",isSuccess:"",onOk:d.noop,cancelDisplay:"",onCancel:d.noop,onContentReady:d.noop,onContentChange:d.noop,onModalShow:d.noop,onModalHide:d.noop};var b=function(l,k){if(l=="1"){return[{html:'<button type="button" class="btn btn-sm btn-primary btn-dailog btn-ok">确认投注</button>',selector:".btn-ok",callback:j("onOk")},{html:'<button type="button" class="btn btn-sm btn-default btn-cancel">返回重选</button>',selector:".btn-cancel",callback:j("onCancel")}]}else{if(l=="2"){return[{html:'<button type="button" class="btn btn-sm btn-primary btn-dailog btn-ok">确认投注</button>',selector:".btn-ok",callback:j("onOk")},{html:'<a type="button" target="_blank" id="_custom_service" class="btn btn-sm btn-default btn-cancel">在线客服</a>'}]}else{if(l=="3"){return[{html:'<button type="button" href="javascript:;" class="btn btn-sm btn-primary btn-dailog btn-ok">进入游戏</button>',selector:".btn-ok",callback:j("onOk")},{html:'<button type="button" href="javascript:;" class="btn btn-sm btn-default btn-cancel">去转账</button>',selector:".btn-cancel",callback:j("onCancel")}]}else{if(l=="4"){return[{html:'<button type="button" class="btn btn-sm btn-primary btn-dailog btn-ok">'+k+"</button>",selector:".btn-ok",callback:j("onOk")},{html:'<button type="button" class="btn btn-sm btn-default btn-cancel">返回</button>',selector:".btn-cancel",callback:j("onCancel")}]}else{if(l=="5"){return[{html:'<button type="button" class="btn btn-sm btn-primary btn-dailog btn-ok">打印</button>',selector:".btn-ok",callback:j("onOk")},{html:'<button type="button" class="btn btn-sm btn-default btn-cancel">关闭</button>',selector:".btn-cancel",callback:j("onCancel")}]}else{return[{html:'<button type="button" class="btn btn-sm btn-primary btn-dailog btn-ok">确定</button>',selector:".btn-ok",callback:j("onOk")},{html:'<button type="button" class="btn btn-sm btn-default btn-cancel">取消</button>',selector:".btn-cancel",callback:j("onCancel")}]}}}}}};d.extend(f.prototype,{getOptions:function(k){return d.extend({},f.defaults,k||{})},setOptions:function(k){return d.extend(this.options,k||{})},open:function(m){var l=this;this.state=m;!this.$modal&&i(this,this.options);var k=this.$modal;k.modal("show");k.on("shown.bs.modal",function(){if(!l.options.cancelDisplay){d("#_confirm_dialog .modal-header .close").unbind("click").bind("click",function(){k.modal("hide");k.on("hidden.bs.modal",function(n){k.remove();e.hide()})})}else{d("#_confirm_dialog .modal-header .close").unbind("click").bind("click",j("onCancel",l.options))}})},hide:function(){var k=this.$modal;k.modal("hide");k.on("hidden.bs.modal",function(l){k.remove();e.hide()})},setTitle:function(m,l){var k=m;this.$modalTitle[l===true?"html":"text"](k)},setContent:(function(){var k=true;return function(q){var n=this.options.isSuccess;var m="glyphicon glyphicon-exclamation-sign";var r="co";if(n=="success"){d("#_confirm_dialog").removeClass("prompt").addClass("success");m="glyphicon glyphicon-ok";r="cg"}else{if(n=="question"){d("#_confirm_dialog").removeClass("prompt").addClass("doubt");m="glyphicon glyphicon-question-sign";r="cr"}else{if(n=="error"){d("#_confirm_dialog").removeClass("prompt").addClass("fail");m="glyphicon glyphicon-remove";r="cr"}}}var l="";var p=q.content.split("☠");for(var o=0;o<p.length;o++){l+="<div class='icon_div'><i class='"+m+"'></i></div><h6>"+q.title+"</h6><p style='width: 264px;word-break: break-all;overflow-y: auto;max-height:98px;'>"+p[o]+"</p>"}this.$modalBody.html(l);!k?this.$modal.trigger("contentChange"):(k=false)}})(),addButtons:function(n){m=b(n.buttons,n.buttonName);var m=!d.isArray(m)?[]:m,l=this,k=[];m.forEach(function(o){k.push(o.html);o.selector&&l.$modal.on("click",o.selector,d.proxy(function(s){var p=this,r=d(s.currentTarget);r[0].disabled=true;var t=typeof o.callback==="function"?o.callback:"",q=t&&t.apply(p,arguments);if(q===false){r[0].disabled=false;return}if(typeof(q)==="object"&&"done" in q&&typeof q.done==="function"){q.done(function(){l.hide()})}else{l.hide()}},l))});if(!this.options.cancelDisplay){this.$modalFooter.prepend(k[0])}else{this.$modalFooter.prepend(d(k.join("")))}d("#_custom_service").unbind("click").click(function(){var o=_custom_service.split(";")[0];openWindwDialog(o,1024,798)})},hideButton:function(k){k&&this.$modalFooter.find(k).hide()},showButton:function(k){k&&this.$modalFooter.find(k).show()},setWidth:function(k){this.$modal.find(".modal-dialog").css("width",k)}});["setTitle","setContent","addButtons","hideButton","showButton","setWidth","closeClick"].forEach(function(l){var k=f.prototype[l];f.prototype[l]=function(){if(!arguments.length||!this.$modal){return}return k.apply(this,arguments)}});return f})(jQuery);