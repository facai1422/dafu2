AgentCenter={userArr:[],currentPosition:function(b,c){var a={};a.userID=b;a.userName=$(c).attr("uname");this.userArr.push(a)},memberManage:function(f,b,c){var d="<a href='#' id='cur_userAgent' class='cb'>"+personObj.UserName+"</a>";$("#_currentUser").html(d);if(b){$("#cid").val(b)}else{$("#cid").val("");$("#cname").val("")}var e={};e.CurrentPageSize=10;e.IsP=1;e.CurrentPageIndex=f;if(b){e.UserID=b;$("#username").val("")}e.LikeUserName=$("#username").val();if(e.LikeUserName){e.TreeType=1}else{e.TreeType=2}var g=$("#starttime").val();var i=$("#endtime").val();e.BeginDate=(g)?g+" 00:00:00":"";e.EndDate=(i)?i+" 23:59:59":"";if(e.LikeUserName){AgentCenter.getParentsAgentTreeInfo(e.LikeUserName,"")}if(b){var h="";if(c){h=$(c).attr("uname");$("#cname").val(h)}else{h=$("#cname").val()}AgentCenter.getParentsAgentTreeInfo(h,b)}var a=ctx+"/agentCenter/Getmyteam";bet_Loadding("加载中，请稍后……","#memberList");$.post(a,{message:json2str(e)},function(o){var n="";$("#_sumInfo").empty();if(o.SystemState=="64"){$("#memberList").find("tr:gt(0)").remove();if(o.MyteamList.length>0){$.each(o.MyteamList,function(r,s){n+="<tr Level='"+s.Leve+"' UserID='"+s.UserID+"' Rebate='"+s.Rebate+"' Category='"+s.Category+"' ParentName='"+s.ParentName+"'>";var t=Number(s.Category)&64;n+="<td data-toggle='tooltip' title="+s.UserName+">";if(t==64){n+=s.UserName+"</td>"}else{n+="<a uname="+s.UserName+""+((t==64)?"":" class='cb'")+" onclick='AgentCenter.memberManage(0,"+s.UserID+",this);'>"+s.UserName+"</a></td>"}n+="<td>"+AgentCenter.getUserTypeName(s.Category)+"</td>";n+="<td class='cy'>"+s.Rebate+"</td>";n+="<td title="+s.ParentName+" pname="+s.ParentName+">"+s.ParentName+"</td>";n+="<td data-toggle='tooltip' title="+s.LotteryMoney+" lmoney="+s.LotteryMoney+">"+getScreen(s.LotteryMoney+"",6,15)+"</td>";n+="<td>"+s.CreateTime+"</td>";n+="<td id=lastTime"+r+"></td>";n+="<td id=online"+r+" data-aris='"+r+"'></td>";n+="<td title="+s.UserName+" uname="+s.UserName+">";if(personObj.IsShowTran==1){n+="<a href='javascript:void(0)' data-toggle='modal'  onclick='AgentCenter.memberOper(this,3,\""+s.Parentrebate+"\");'>充值</a>"}if(personObj.UserName==s.ParentName){n+="<a href='javascript:void(0)' onclick='AgentCenter.memberOper(this,4,\""+s.Parentrebate+"\");'>升点</a>"}n+="<a href='#manage_02' role='tab' data-toggle='tab' onclick='AgentCenter.memberOper(this,1,\""+s.Parentrebate+"\");'>投注</a><a href='javascript:void(0)' onclick='AgentCenter.memberOper(this,2,\""+s.Parentrebate+"\");'>账变</a>";if(personObj.UserName==s.ParentName){n+=(t==64)?"<a href='javascript:;'onclick='AgentCenter.memberToAgent(this,\""+s.UserID+"\");'>转为代理</a>":""}n+="</td>";n+="</tr>";$("#_sumInfo").html("团队彩票总金额： "+o.TotalMoney+"  元")})}else{n+="<tr><td colspan='9'>无记录</td></tr>"}$("#memberList").append(n);var q=[];$("#memberList").find("tr:gt(0)").each(function(){q.push($(this).attr("UserID"))});var m=ctx+"/agentCenter/GetUsersLoginState";var j=ctx+"/resources/images/online.png";var l=ctx+"/resources/images/inline.png";var p="";var k="";$.post(m,{message:json2str(q)},function(r){$.each(r.UserLoginStateList,function(s,t){$("#lastTime"+s).text((t.Flex.LoginTime==null?"":t.Flex.LoginTime));if(t.Flex.OperationTypeEnum==0){p='<i class="state state_on"></i>'}else{p='<i class="state"></i>'}$("#online"+s).html(p)})},"json")}$.page(f,o.DataCount,"memberList",9);hide_bet_loadding()},"json")},getUserTypeName:function(b){var a=Number(b)&64;return(a==64)?"会员":"代理"},getParentsAgentTreeInfo:function(b,d){var c={};c.UserName=b;var a=ctx+"/agentCenter/getParentsAgentTreeInfo";$.post(a,{message:json2str(c)},function(f){if(null!=f.GetUserParentInfo&&f.GetUserParentInfo.length>0){var e="";var g=f.GetUserParentInfo.reverse();$.each(g,function(h,j){e+="<a href='#' class='cb' uname="+j.UserName+" onclick='AgentCenter.memberManage(0,"+j.User_Id+",this);'>"+j.UserName+"</a><span style='color: #666;padding: 0 5px'>/</span>"});if(d!=""){e+="<a href='#' class='cb' uname="+b+" onclick='AgentCenter.memberManage(0,"+d+",this);'>"+b+"</a>"}$("#_currentUser").html(e)}},"json")},memberOper:function(g,d,f){var i=$(g).parent().attr("uname");var m=$(g).parent().parent().find("td:eq(5)").attr("lmoney");var j=$(g).parent().parent().find("td:eq(0)").attr("title");var a=$(g).parent().parent().find("td:eq(6)").text();var e=$(g).parent().parent().attr("UserID");var c=$(g).parent().parent().attr("Rebate");var l=$(g).parent().parent().attr("Category");var b=$(g).parent().parent().attr("ParentName");var h=$("#num").val();var k=$(g).parent().parent().attr("Level");$("#UserName").val(i);$("#LotteryMoney").val(m);$("#onlineState").val(j);$("#lastTime").val(a);$("#UserID").val(e);$("#Rebate").val(c);$("#Category").val(l);$("#Category").val(b);$("#Category").val(h);$("#Level").val(k);$("#Parentrebate").val(f);$("#lowerAccount,#lowerAccount_").text(i);memberInfoTab(null,d);if(personObj.IsShowTran!=1){$("#tab_04").remove()}$("#num").val(d)},personInfo:function(k,f){$(k).parent().tooltip("hide");var i=$(k).parent().attr("uname");var m=$(k).parent().parent().find("td:eq(5)").attr("lmoney");var j=$(k).parent().parent().find("td:eq(0)").attr("title");var a=$(k).parent().parent().find("td:eq(6)").text();var d=$(k).parent().parent().attr("UserID");var c=$(k).parent().parent().attr("Rebate");var l=$(k).parent().parent().attr("Category");var b=$(k).parent().parent().attr("ParentName");var h=$("#num").val();var e=ctx+"/agentCenter/personInfo";var g={};g.UserName=i;g.LotteryMoney=m;g.onlineState=j;g.lastTime=a;g.UserID=d;g.Rebate=c;g.Parentrebate=f;g.ParentName=b;g.Category=l;g.num=h;_loadPage(".tab-content",e,"","",{message:json2str(g)})},agentLimitTable:function(b){var a=ctx+"/agentCenter/GetAgentsRenbate";$.post(a,function(d){if(d.SystemState=="64"&&d.GetRm.length>0){$("#_agentLimitTable").find("tr:gt(0)").remove();var c="";$.each(d.GetRm,function(e,f){c+="<tr Rebate = "+f.Rebate+">";c+="<td style='width: 10%;'>"+e+"</td>";c+="<td style='width: 20%;'>"+f.Rebate+"</td>";c+="<td style='width: 20%;'>"+f.Capacity+"</td>";c+="<td style='width: 30%;'>"+f.RegisNum+"</td>";if(f.RegisNum>0){c+="<td style='width: 20%;'><a href='javaScript:void(0);' style='color:#FF0000;' onclick='AgentCenter.GetSingleAgentsRenbate(this);'>查看</a></td>"}else{c+="<td style='width: 20%;'>--</td>"}c+="</tr>"});$("#_agentLimitTable").append(c)}},"json")},GetSingleAgentsRenbate:function(b){$("#_childUserNames").empty();var d=getLeftAndTop("#childUserNames","#_mainDiv.inner");$("#childUserNames").css({display:"block",position:"absolute",left:"22%",top:"23%"});_game_zhezhao("_agent_iframe1");var c=ctx+"/agentCenter/GetSingleAgentsRenbate";var e={};e.Rebate=$(b).parent().parent().attr("Rebate");bet_Loadding("加载中，请稍后……","#myTab_Content0 .tab-content");$.post(c,{message:json2str(e)},function(g){if(g.SystemState=="64"){var a="";var f=0;$.each(g.UserName,function(k,j){f=f+1;var h="<td>"+j+"</td>";a=a+h;if(f%4==0){$("#_childUserNames").append("<tr>"+a+"</tr>");a="";f=0}});if(g.UserName.length==2){$("#_childUserNames").append("<tr>"+a+"<td></td><td></td></tr>")}else{$("#_childUserNames").append("<tr>"+a+"</tr>")}}hide_bet_loadding()},"json")},profitRecord:function(){var a=ctx+"/agentCenter/LowerDividendRecord";var b={};b.StartTime=$("#starttime").val()+" 00:00:00";b.EndTime=$("#endtime").val()+" 23:59:59";b.CurrentPageIndex=0;b.CurrentPageSize=3;b.UserID=-1;$.post(a,{message:json2str(b)},function(d){$("#profitRecordTable").find("tr:gt(0)").remove();var c="";$("#profitRecordTable").append(c)},"json")},memberToAgent:function(b,a){var c={};c.Type=1;c.UID=a;$.post(ctx+"/agentCenter/ModifyCategoryInfo",{message:json2str(c)},function(d){if(d.IsComplete){_tips_alert("",1,"转为代理成功!");$(b).parent().parent().find("td:eq(1)").html("代理");$(b).remove();AgentCenter.memberManage($("#memberList").next().find(".page .active").text()-1)}else{_confirm("error",0,"","转为代理失败")}},"json")}};